"use strict";(self.webpackChunkflappy_bird=self.webpackChunkflappy_bird||[]).push([[143],{108:(t,e,r)=>{var n,o=r(428),i="PreloadScene",c="GameScene",s="mainAtlas",a="bird",u="bestFlappyBirdScore";function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}!function(t){t[t[void 0]=0]="undefined",t[t.preAction=1]="preAction",t[t.action=2]="action",t[t.die=3]="die",t[t.result=4]="result"}(n||(n={}));var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(i,t);var e,r,n,o=h(i);function i(){return l(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"preload",value:function(){}},{key:"create",value:function(){this.load.atlas(s,"../../assets/atlases/main.png","../../assets/atlases/main.json"),this.load.atlas(a,"../../assets/atlases/bird.png","../../assets/atlases/bird.json"),this.load.on("progress",this._onFileLoadComplete,this),this.load.on("complete",this._onLoadComplete,this),this.load.start()}},{key:"_onFileLoadComplete",value:function(t){}},{key:"_onLoadComplete",value:function(){this.game.scene.start(c)}}])&&p(e.prototype,r),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(o.Scene),v=2,m=200,g={key:"fly",frames:a,frameRate:12,repeat:-1};function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=T(t);if(e){var o=T(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return j(this,r)}}function j(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return k(t)}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(i,t);var e,r,n,o=P(i);function i(t){var e,r,n,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t,100,287,a),r=k(e),c=!0,(n="isAlive")in r?Object.defineProperty(r,n,{value:c,enumerable:!0,configurable:!0,writable:!0}):r[n]=c,e.scene=t,e._initialSetup(),e}return e=i,(r=[{key:"update",value:function(){var t=Math.min(Math.max(this.body.velocity.y,-m),m);this.rotation=Math.PI*t/1080}},{key:"resetPosition",value:function(){this.setPosition(100,287),this.rotation=0,this.isAlive=!0,this.play({key:"fly",repeat:-1})}},{key:"jump",value:function(){this.rotation=-Math.PI/4,this.body.velocity.y=-m}},{key:"die",value:function(){this.isAlive=!1,this.rotation=Math.PI/4,this.stop()}},{key:"disablePhysics",value:function(){this.scene.physics.world.disable(this)}},{key:"enablePhysics",value:function(){this.scene.physics.world.enable(this)}},{key:"_initialSetup",value:function(){this.anims.create(g),this.play({key:"fly",repeat:-1})}}])&&O(e.prototype,r),n&&O(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(o.Physics.Arcade.Sprite);function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=B(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},A.apply(this,arguments)}function B(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=M(t);if(e){var o=M(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return G(this,r)}}function G(t,e){if(e&&("object"===x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(i,t);var e,r,n,o=I(i);function i(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t.physics.world,t)).scene=t,n._x=e,n._score=r,n._setup(),n}return e=i,(r=[{key:"destroy",value:function(){this.getPipes().forEach((function(t){return t.destroy()})),A(M(i.prototype),"destroy",this).call(this)}},{key:"getPipes",value:function(){return[this.pipeTop,this.pipeBottom]}},{key:"move",value:function(t){this.pipeTop.x-=t,this.pipeBottom.x-=t,this.pipeTop.x<=-this.pipeTop.width/2&&this.emit("outOfScreen")}},{key:"_setup",value:function(){var t=150*Math.random()+380,e=this.scene.physics.add.sprite(this._x,t,s,"pipe-1.png"),r=t-e.height-(80*Math.random()+100)+2*this._score,n=this.scene.physics.add.sprite(this._x,r,s,"pipe-2.png");e.setImmovable(!0),n.setImmovable(!0),e.body.allowGravity=!1,n.body.allowGravity=!1,this.pipeBottom=e,this.pipeTop=n}}])&&E(e.prototype,r),n&&E(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(o.Physics.Arcade.Group);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=z(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},F.apply(this,arguments)}function z(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=X(t)););return t}function N(t,e){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},N(t,e)}function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=X(t);if(e){var o=X(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return H(this,r)}}function H(t,e){if(e&&("object"===U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function X(t){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},X(t)}var $=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e)}(i,t);var e,r,n,o=Y(i);function i(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t)).scene=t,n._score=e,n._bestScore=r,n._build(),n}return e=i,(r=[{key:"destroy",value:function(){this.scene.tweens.killTweensOf(this._proposal),this._bg.destroy(),this._gameOver.destroy(),this._playerScoreText.destroy(),this._bestScoreText.destroy(),this._proposal.destroy(),F(X(i.prototype),"destroy",this).call(this)}},{key:"_build",value:function(){var t=this.scene.game.config,e=t.width,r=t.height;this._bg=this.scene.add.image(+e/2,+r/2,s,"popup.png"),this._gameOver=this.scene.add.image(+e/2,+r/2-42,s,"gameover.png"),this._playerScoreText=this.scene.add.text(+e/2,+r/2,"You scored - ".concat(this._score)),this._bestScoreText=this.scene.add.text(+e/2,+r/2+21,"Best score - ".concat(Math.max(this._score,this._bestScore))),this._proposal=this.scene.add.text(+e/2,+r/2+52,"TAP TO PLAY AGAIN",{fontSize:"20px"}),this._playerScoreText.setOrigin(.5),this._bestScoreText.setOrigin(.5),this._proposal.setOrigin(.5),this.scene.tweens.add({targets:this._proposal,alpha:0,duration:700,ease:"SineInOut",yoyo:!0,repeat:-1})}}])&&L(e.prototype,r),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(o.GameObjects.Container);function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function J(t){return function(t){if(Array.isArray(t))return K(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function W(t,e){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},W(t,e)}function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rt(t);if(e){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}function tt(t,e){if(e&&("object"===q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return et(t)}function et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}function nt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W(t,e)}(c,t);var e,r,o,i=Z(c);function c(){var t;Q(this,c);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return nt(et(t=i.call.apply(i,[this].concat(r))),"_score",0),nt(et(t),"_bestScore",0),nt(et(t),"_state",n.undefined),t}return e=c,(r=[{key:"create",value:function(){this._buildBg(),this._buildBird(),this._drawScore(),this._setGameState(n.preAction)}},{key:"update",value:function(){switch(this._state){case n.action:this._actionsUpdates();break;case n.die:this._dieUpdates()}}},{key:"_onStateUpdate",value:function(){switch(this._state){case n.preAction:this._reset();break;case n.result:this._showPopup(),this._changeLocalStorage();break;case n.die:this._bird.die()}}},{key:"_onPointerDown",value:function(t){if(!t.wasTouch)switch(this._state){case n.action:this._bird.jump();break;case n.preAction:this._setGameState(n.action),this._startAction();break;case n.result:this._popup.destroy(),this._setGameState(n.preAction)}}},{key:"_actionsUpdates",value:function(){this._bird.y>this.game.config.height&&this._setGameState(n.die),this._bird.y<=0&&(this._bird.y=0,this._bird.body.velocity.y=0);var t=this._getSpeed();this._bird.update(),this._bg.tilePositionX+=v,this._pipes.move(t)}},{key:"_dieUpdates",value:function(){this._bird.y>+this.game.config.height&&(this._bird.y=+this.game.config.height-5,this._bird.disablePhysics(),this._setGameState(n.result))}},{key:"_setGameState",value:function(t){this._state!==t&&(this._state=t,this._onStateUpdate())}},{key:"_startAction",value:function(){this._buildPipe(),this._hideMessage(),this._bird.enablePhysics(),this._bird.jump()}},{key:"_reset",value:function(){this._score=0,this._updateScoreText(),this._pipes&&this._pipes.destroy(),this._bird.resetPosition(),this._showMessage()}},{key:"_buildBg",value:function(){var t=this;this._bg=this.add.tileSprite(256,256,512,512,s,"bg.png"),this._bg.setInteractive(),this._bg.on("pointerdown",(function(e){return t._onPointerDown(e)}))}},{key:"_buildBird",value:function(){this.add.existing(this._bird=new R(this)),this._bird.setDepth(2)}},{key:"_showPopup",value:function(){this.add.existing(this._popup=new $(this,this._score,this._bestScore))}},{key:"_buildPipe",value:function(){var t=this;this.add.existing(this._pipes=new D(this,400,this._score)),this._pipes.setDepth(1),this._overlap=this.physics.add.overlap(this._bird,J(this._pipes.getPipes()),(function(){return t._onCollision()})),this._pipes.on("outOfScreen",(function(){return t._destroyPipes()}))}},{key:"_destroyPipes",value:function(){this._pipes.destroy(),this._pipes=null,this._overlap.destroy(),this._buildPipe(),++this._score,this._updateScoreText()}},{key:"_drawScore",value:function(){this._score=0,this._bestScore=localStorage.getItem(u)?+localStorage.getItem(u):0,this._scoreText=this.add.text(10,10,"Score - ".concat(this._score,"\nBest - ").concat(this._bestScore)),this._scoreText.setDepth(3),this._updateScoreText()}},{key:"_updateScoreText",value:function(){this._scoreText.text="Score - ".concat(this._score,"\nBest - ").concat(this._bestScore)}},{key:"_showMessage",value:function(){if(this._message)this._message.alpha=1;else{var t=this.game.config,e=t.width,r=t.height;this._message=this.add.image(+e/2,+r/2,s,"message.png")}}},{key:"_hideMessage",value:function(){this._message.alpha=0}},{key:"_onCollision",value:function(){this._setGameState(n.die)}},{key:"_changeLocalStorage",value:function(){this._bestScore=Math.max(this._score,this._bestScore),localStorage.setItem(u,"".concat(this._bestScore))}},{key:"_getSpeed",value:function(){return v+.1*this._score}}])&&V(e.prototype,r),o&&V(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}(o.Scene);function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function ct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function st(t,e){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},st(t,e)}function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ft(t);if(e){var o=ft(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ut(this,r)}}function ut(t,e){if(e&&("object"===it(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ft(t){return ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ft(t)}new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&st(t,e)}(s,Phaser.Game);var e,r,n,o=at(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=o.call(this,t))._gameConfig=t,e._initializeScenes(),e.scene.start(i),e}return e=s,(r=[{key:"_initializeScenes",value:function(){this.scene.add(i,new _(this._gameConfig)),this.scene.add(c,new ot(this._gameConfig))}}])&&ct(e.prototype,r),n&&ct(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}())({type:o.AUTO,parent:"content",width:512,height:512,backgroundColor:"#353535",scene:[],physics:{default:"arcade",arcade:{gravity:{y:500}}},scale:{mode:o.Scale.FIT,autoCenter:o.Scale.CENTER_BOTH,parent:"content",width:320,height:480}})}},t=>{var e;e=108,t(t.s=e)}]);