(self.webpackChunkflappy_bird=self.webpackChunkflappy_bird||[]).push([[143],{622:function(e,t,n){var o,r,i;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}i=function(){var e=function e(){function t(e){return r.appendChild(e.dom),e}function n(e){for(var t=0;t<r.children.length;t++)r.children[t].style.display=t===e?"block":"none";o=e}var o=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(e){e.preventDefault(),n(++o%r.children.length)}),!1);var i=(performance||Date).now(),s=i,a=0,c=t(new e.Panel("FPS","#0ff","#002")),u=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:r,addPanel:t,showPanel:n,begin:function(){i=(performance||Date).now()},end:function(){a++;var e=(performance||Date).now();if(u.update(e-i,200),e>s+1e3&&(c.update(1e3*a/(e-s),100),s=e,a=0,l)){var t=performance.memory;l.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){i=this.end()},domElement:r,setMode:n}};return e.Panel=function(e,t,n){var o=1/0,r=0,i=Math.round,s=i(window.devicePixelRatio||1),a=80*s,c=48*s,u=3*s,l=2*s,f=3*s,p=15*s,h=74*s,y=30*s,d=document.createElement("canvas");d.width=a,d.height=c,d.style.cssText="width:80px;height:48px";var b=d.getContext("2d");return b.font="bold "+9*s+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=n,b.fillRect(0,0,a,c),b.fillStyle=t,b.fillText(e,u,l),b.fillRect(f,p,h,y),b.fillStyle=n,b.globalAlpha=.9,b.fillRect(f,p,h,y),{dom:d,update:function(c,v){o=Math.min(o,c),r=Math.max(r,c),b.fillStyle=n,b.globalAlpha=1,b.fillRect(0,0,a,p),b.fillStyle=t,b.fillText(i(c)+" "+e+" ("+i(o)+"-"+i(r)+")",u,l),b.drawImage(d,f+s,p,h-s,y,f,p,h-s,y),b.fillRect(f+h-s,p,s,y),b.fillStyle=n,b.globalAlpha=.9,b.fillRect(f+h-s,p,s,i((1-c/v)*y))}}},e},"object"===s(t)?e.exports=i():void 0===(r="function"==typeof(o=i)?o.call(t,n,t,e):o)||(e.exports=r)},167:(e,t,n)=>{"use strict";var o,r=n(428),i="PreloadScene",s="GameScene",a="bkg-day",c="bkg-night",u="base",l="main",f="bird",p="redbird",h="yellowbird",y=Object.freeze({die:"die",hit:"hit",point:"point",swoosh:"swoosh",wing:"wing"}),d="bestFlappyBirdScore";!function(e){e[e[void 0]=0]="undefined",e[e.preAction=1]="preAction",e[e.action=2]="action",e[e.die=3]="die",e[e.result=4]="result"}(o||(o={}));var b=n(622),v=n.n(b);function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.initSounds()}var t,n,o;return t=e,(n=[{key:"playDie",value:function(){this.scene.sound.play(y.die)}},{key:"playHit",value:function(){this.scene.sound.play(y.hit)}},{key:"playPoint",value:function(){this.scene.sound.play(y.point)}},{key:"playSwoosh",value:function(){this.scene.sound.play(y.swoosh)}},{key:"playWing",value:function(){this.scene.sound.play(y.wing)}},{key:"initSounds",value:function(){var e=this;Object.keys(y).forEach((function(t){e.scene.sound.add(t)}))}}])&&m(t.prototype,n),o&&m(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),w={speed:2,birdGravity:800,birdJump:200,bestScore:0},O=["blue","red","yellow"],S={key:O[0],frames:f,frameRate:12,repeat:-1},P={key:O[1],frames:p,frameRate:12,repeat:-1},k={key:O[2],frames:h,frameRate:12,repeat:-1},j=function(e){return w.speed+.05*e},x=function(e){e>w.bestScore&&(w.bestScore=e,localStorage.setItem(d,e.toString()))};function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=A(e);if(t){var r=A(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return B(this,n)}}function B(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(i,e);var t,n,o,r=E(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),D(C(t=r.call(this,e,100,287,p)),"isAlive",!0),D(C(t),"keyIndex",0),t.scene=e,t.initialSetup(),t}return t=i,n=[{key:"update",value:function(){var e=Math.min(Math.max(this.body.velocity.y,-w.birdJump),w.birdJump);this.rotation=Math.PI*e/1080}},{key:"resetPosition",value:function(){this.setPosition(50,302),this.setInteractive(),this.rotation=0,this.isAlive=!0,this.play({key:O[this.keyIndex],repeat:-1})}},{key:"jump",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-w.birdJump;this.rotation=-Math.PI/4,this.body.velocity.y=e}},{key:"die",value:function(){this.jump(-w.birdJump),this.isAlive=!1,this.rotation=Math.PI/4,this.stop()}},{key:"disablePhysics",value:function(){this.disableInteractive(),this.scene.physics.world.disable(this)}},{key:"enablePhysics",value:function(){this.disableInteractive(),this.scene.physics.world.enable(this)}},{key:"initialSetup",value:function(){var e=this;this.createAnimations(),this.play({key:O[this.keyIndex],repeat:-1}),this.setInteractive(),this.on("pointerdown",(function(){return e.onPointerDown()}))}},{key:"createAnimations",value:function(){var e=this;[S,P,k].forEach((function(t){return e.anims.create(t)}))}},{key:"onPointerDown",value:function(){this.isAlive&&(this.keyIndex=(this.keyIndex+1)%O.length,this.play({key:O[this.keyIndex],repeat:-1}))}}],n&&_(t.prototype,n),o&&_(t,o),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Physics.Arcade.Sprite);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function G(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=H(e);if(t){var r=H(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return z(this,n)}}function z(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return F(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(i,e);var t,n,o,r=L(i);function i(e,t,n){var o,s,a,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o=r.call(this,e),s=F(o),c=!1,(a="isScored")in s?Object.defineProperty(s,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[a]=c,o.scene=e,o.score=t,o.nightAlpha=n,o.setup(),o}return t=i,(n=[{key:"pipes",get:function(){return[this.pipeTop,this.pipeBottom]}},{key:"getWidth",value:function(){return this.pipeBottom.width}},{key:"setup",value:function(){var e=150*Math.random()+350,t=this.scene.physics.add.sprite(0,e,l,"pipe-green.png"),n=e-t.height-(80*Math.random()+80)+1.5*this.score,o=this.scene.physics.add.sprite(0,n,l,"pipe-green.png");o.scaleY=-1;var r=this.scene.add.sprite(0,e,l,"pipe-red.png"),i=this.scene.add.sprite(0,n,l,"pipe-red.png");i.scaleY=-1,r.alpha=this.nightAlpha,i.alpha=this.nightAlpha,t.setImmovable(!0),o.setImmovable(!0),t.body.allowGravity=!1,o.body.allowGravity=!1,this.pipeBottom=t,this.pipeTop=o,this.add(this.pipeBottom),this.add(this.pipeTop),this.add(r),this.add(i)}}])&&G(t.prototype,n),o&&G(t,o),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.GameObjects.Container);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function W(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=X(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},U.apply(this,arguments)}function X(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Q(e);if(t){var r=Q(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return q(this,n)}}function q(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(i,e);var t,n,o,r=V(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e)).scene=e,t.build(),t}return t=i,n=[{key:"destroy",value:function(){this.scene.tweens.killTweensOf(this.proposal),this.bg.destroy(),this.gameOver.destroy(),this.playerScoreText.destroy(),this.bestScoreText.destroy(),this.proposal.destroy(),U(Q(i.prototype),"destroy",this).call(this)}},{key:"show",value:function(e){1!==this.alpha&&(this.alpha=1,this.proposal.alpha=1,this.bestScoreText.text=this.getBestScoreText(w.bestScore),this.playerScoreText.text=this.getScoreText(e),this.scene.tweens.add({targets:this.proposal,alpha:0,duration:700,ease:"SineInOut",yoyo:!0,repeat:-1}))}},{key:"hide",value:function(){this.scene.tweens.killTweensOf(this.proposal),this.alpha=0,this.proposal.alpha=0}},{key:"build",value:function(){var e=this.scene.game.config,t=e.width,n=e.height;this.bg=this.scene.add.image(+t/2,+n/2,l,"popup.png"),this.gameOver=this.scene.add.image(+t/2,+n/2-42,l,"gameover.png"),this.playerScoreText=this.scene.add.text(+t/2,+n/2,this.getScoreText()),this.bestScoreText=this.scene.add.text(+t/2,+n/2+21,this.getBestScoreText(w.bestScore)),this.proposal=this.scene.add.text(+t/2,+n/2+52,this.getProposalText(),{fontSize:"20px"}),this.playerScoreText.setOrigin(.5),this.bestScoreText.setOrigin(.5),this.proposal.setOrigin(.5),this.add([this.bg,this.gameOver,this.playerScoreText,this.bestScoreText,this.proposal])}},{key:"getScoreText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"You scored - ".concat(e)}},{key:"getBestScoreText",value:function(e){return"Best score - ".concat(e)}},{key:"getProposalText",value:function(){return"TAP TO PLAY AGAIN"}}],n&&W(t.prototype,n),o&&W(t,o),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.GameObjects.Container);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function ee(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ie(e);if(t){var r=ie(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return oe(this,n)}}function oe(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return re(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(i,Phaser.GameObjects.Container);var t,n,o,r=ne(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),se(re(t=r.call(this,e)),"score",0),se(re(t),"numbers",[]),t}return t=i,(n=[{key:"updateScore",value:function(e){var t=this;this.destroyNumbers(),this.score=e;var n=e.toString();n.split("").forEach((function(e,o){var r=t.scene.add.image(0,0,l,"".concat(e,".png"));r.setOrigin(.5,.5);var i=(o-Math.floor(n.length/2))*r.width;r.setPosition(i,0),t.add(r),t.numbers.push(r)}))}},{key:"destroyNumbers",value:function(){this.numbers.forEach((function(e){return e.destroy()})),this.numbers=[]}}])&&ee(t.prototype,n),o&&ee(t,o),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function fe(e,t){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fe(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=de(e);if(t){var r=de(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return he(this,n)}}function he(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ye(e)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(f,e);var t,n,i,s=pe(f);function f(){var e;ue(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return be(ye(e=s.call.apply(s,[this].concat(n))),"gamesPlayedInSession",0),be(ye(e),"score",0),be(ye(e),"pipes",[]),be(ye(e),"state",o.undefined),be(ye(e),"accumulator",0),be(ye(e),"frameTime",1e3/60),e}return t=f,(n=[{key:"create",value:function(){this.soundController=new g(this),this.spaceKey=this.input.keyboard.addKey(r.Input.Keyboard.KeyCodes.SPACE),this.buildBg(),this.buildBase(),this.buildBird(),this.buildPopup(),this.drawScore(),this.drawFlash(),this.updateGameState(o.preAction)}},{key:"update",value:function(e,t){for(this.accumulator+=t;this.accumulator>=this.frameTime;){var n;switch(this.accumulator-=this.frameTime,r.Input.Keyboard.JustDown(this.spaceKey)&&this.onInputDown(),null===(n=this.stats)||void 0===n||n.update(),this.state){case o.action:this.actionsUpdates();break;case o.die:this.dieUpdates()}}}},{key:"onInputDown",value:function(){switch(this.state){case o.action:this.soundController.playWing(),this.bird.jump();break;case o.preAction:this.updateGameState(o.action),this.soundController.playWing(),this.startAction();break;case o.result:this.gameOverPopup.hide(),this.updateGameState(o.preAction)}}},{key:"actionsUpdates",value:function(){this.updateBird(),this.moveBkg(),this.movePipes()}},{key:"updateBird",value:function(){this.bird.y>380&&this.updateGameState(o.die),this.bird.y<=0&&(this.bird.y=0,this.bird.body.velocity.y=0),this.bird.update()}},{key:"moveBkg",value:function(){var e=j(this.score);this.bkgDay.tilePositionX+=.8*e,this.bkgNight.tilePositionX+=.8*e,this.base.tilePositionX+=e}},{key:"movePipes",value:function(){var e=this,t=j(this.score);this.pipes.forEach((function(n){n.x-=t,n.x<=e.bird.x&&!n.isScored&&(n.isScored=!0,e.updateScoreText(++e.score)),n.x<=-n.getWidth()/2&&(n.destroy(),e.pipes.shift(),e.addPipe(),e.updateOverlap())}))}},{key:"dieUpdates",value:function(){this.bird.y>380&&(this.bird.y=400,this.bird.disablePhysics(),this.updateGameState(o.result))}},{key:"updateGameState",value:function(e){if(this.state!==e)switch(this.state=e,this.state){case o.preAction:this.onPreActionState();break;case o.result:this.onResultState();break;case o.die:this.onDieState();break;case o.action:this.onActionState()}}},{key:"onPreActionState",value:function(){this.reset(),this.resetBkg()}},{key:"onResultState",value:function(){this.changeLocalStorage(),this.gamesPlayedInSession++,this.showPopup()}},{key:"onDieState",value:function(){this.soundController.playHit(),this.soundController.playDie(),this.bird.die(),this.flashScreen(),this.stopTweens()}},{key:"onActionState",value:function(){this.hidePopup(),this.startDaySwitching()}},{key:"startAction",value:function(){this.addPipe(),this.addPipe(),this.addPipe(),this.updateOverlap(),this.hideMessage(),this.bird.enablePhysics(),this.bird.jump()}},{key:"reset",value:function(){this.updateScoreText(0),this.destroyPipes(),this.bird.resetPosition(),this.showMessage()}},{key:"buildBg",value:function(){var e=this;this.bkgDay=this.add.tileSprite(256,256,512,512,a),this.bkgDay.on("pointerdown",(function(){return e.onInputDown()})),this.bkgNight=this.add.tileSprite(256,256,512,512,c),this.bkgNight.alpha=0}},{key:"buildBase",value:function(){this.base=this.add.tileSprite(160,460,330,112,u),this.base.setDepth(4)}},{key:"buildBird",value:function(){this.bird=new I(this),this.bird.setDepth(2),this.add.existing(this.bird)}},{key:"buildPopup",value:function(){this.gameOverPopup=new Z(this),this.gameOverPopup.setDepth(6),this.gameOverPopup.hide(),this.add.existing(this.gameOverPopup)}},{key:"showPopup",value:function(){this.gameOverPopup.show(this.score)}},{key:"hidePopup",value:function(){this.gameOverPopup.hide()}},{key:"addPipe",value:function(){var e=new J(this,this.score,this.bkgNight.alpha),t=this.pipes.length?this.pipes[this.pipes.length-1].x+200:+this.game.config.width+e.getWidth()/2;e.x=t,this.add.existing(e),this.pipes.push(e)}},{key:"destroyPipes",value:function(){var e;this.pipes.forEach((function(e){return e.destroy()})),this.pipes=[],null===(e=this.overlap)||void 0===e||e.destroy(),this.overlap=null}},{key:"drawScore",value:function(){this.score=0,this.scoreText=new ae(this),this.scoreText.setDepth(3),this.scoreText.x=+this.game.config.width/2,this.scoreText.y=50,this.add.existing(this.scoreText)}},{key:"drawFlash",value:function(){var e=this;this.flash=this.add.graphics(),this.flash.fillStyle(16777215,1),this.flash.fillRect(0,0,+this.game.config.width,+this.game.config.height),this.flash.setDepth(5),this.flash.setInteractive(),this.tweens.add({targets:this.flash,alpha:0,duration:1e3,ease:"Linear",repeat:0,onComplete:function(){e.flash.disableInteractive(),e.bkgDay.setInteractive()}})}},{key:"updateScoreText",value:function(e){0!==e&&this.soundController.playPoint(),this.score=e,this.scoreText.updateScore(this.score)}},{key:"showMessage",value:function(){if(this.message)this.message.alpha=1;else{var e=this.game.config,t=e.width,n=e.height;this.message=this.add.image(+t/2,+n/2,l,"message.png")}}},{key:"hideMessage",value:function(){this.message.alpha=0}},{key:"updateOverlap",value:function(){var e,t=this,n=this.pipes.map((function(e){return e.pipes})).flat();null===(e=this.overlap)||void 0===e||e.destroy(),this.overlap=this.physics.add.overlap(this.bird,n,(function(){return t.updateGameState(o.die)}))}},{key:"changeLocalStorage",value:function(){var e;this.score>w.bestScore&&(w.bestScore=this.score,e=w.bestScore,x(e))}},{key:"resetBkg",value:function(){this.bkgDay.tilePositionX=0,this.bkgNight.tilePositionX=0,this.bkgNight.alpha=0}},{key:"stopTweens",value:function(){this.tweens.killTweensOf(this.bkgNight),this.tweens.killTweensOf(this.bkgDay)}},{key:"flashScreen",value:function(){var e=this;this.tweens.add({targets:this.flash,alpha:.7,duration:200,yoyo:!0,ease:r.Math.Easing.Sine.InOut,repeat:0,onComplete:function(){e.flash.alpha=0}})}},{key:"startDaySwitching",value:function(){this.tweens.add({targets:this.bkgNight,alpha:1,duration:15e3,yoyo:!0,repeat:-1})}},{key:"initStats",value:function(){this.stats=new(v()),document.body.appendChild(this.stats.dom)}}])&&le(t.prototype,n),i&&le(t,i),Object.defineProperty(t,"prototype",{writable:!1}),f}(r.Scene);function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Oe(e,t){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oe(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ke(e);if(t){var r=ke(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Pe(this,n)}}function Pe(e,t){if(t&&("object"===me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oe(e,t)}(i,e);var t,n,o,r=Se(i);function i(){return ge(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"preload",value:function(){}},{key:"create",value:function(){var e=this;this.load.image(a,"./assets/bkg-day.png"),this.load.image(c,"./assets/bkg-night.png"),this.load.image(u,"./assets/base.png"),[l,f,p,h].forEach((function(t){e.load.atlas(t,"./atlases/".concat(t,".png"),"./atlases/".concat(t,".json"))})),Object.keys(y).forEach((function(t){e.load.audio(t,"./sounds/".concat(t,".wav"))})),w.bestScore=localStorage.getItem(d)?+localStorage.getItem(d):0,this.load.on("progress",this.onFileLoadComplete,this),this.load.on("complete",this.onLoadComplete,this),this.load.start()}},{key:"onFileLoadComplete",value:function(e){}},{key:"onLoadComplete",value:function(){this.game.scene.start(s)}}])&&we(t.prototype,n),o&&we(t,o),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Scene);function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Te(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _e(e,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_e(e,t)}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Be(e);if(t){var r=Be(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Ee(this,n)}}function Ee(e,t){if(t&&("object"===xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Be(e)}var Ce=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(a,Phaser.Game);var t,n,o,r=Re(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).gameConfig=e,t.initializeScenes(),t.scene.start(i),t}return t=a,(n=[{key:"initializeScenes",value:function(){this.scene.add(i,new je(this.gameConfig)),this.scene.add(s,new ve(this.gameConfig))}}])&&Te(t.prototype,n),o&&Te(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}())({type:r.AUTO,parent:"content",width:288,height:512,backgroundColor:"#353535",scene:[],physics:{default:"arcade",arcade:{gravity:{y:500}}},scale:{mode:r.Scale.FIT,autoCenter:r.Scale.CENTER_BOTH,parent:"content",width:288,height:512}});globalThis.__PHASER_GAME__=Ce}},e=>{var t;t=167,e(e.s=t)}]);